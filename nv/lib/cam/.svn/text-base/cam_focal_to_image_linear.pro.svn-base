;===========================================================================
; cam_focal_to_image_linear
;
;
;===========================================================================
function cam_focal_to_image_linear, cxp, v
@nv_lib.include
 cdp = class_extract(cxp, 'CAMERA')
 cd = nv_dereference(cdp)

 sv = size(v)
 nv = 1
 if(sv[0] GT 1) then nv = sv[2]
 nt = n_elements(cd)

 vv = reform(v, 2,nv*nt)

 MM = make_array(nv, val=1)

 scale = dblarr(2,nv,nt,/nozero)
 scale[0,*,*] = [cd.scale[0,*,*]]##MM
 scale[1,*,*] = [cd.scale[1,*,*]]##MM

 oaxis = dblarr(2,nv,nt,/nozero)
 oaxis[0,*,*] = [cd.oaxis[0,*,*]]##MM
 oaxis[1,*,*] = [cd.oaxis[1,*,*]]##MM

 return, reform(vv/scale + oaxis, 2,nv,nt, /over)
end
;===========================================================================



