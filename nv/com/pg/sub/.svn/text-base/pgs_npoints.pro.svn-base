;===========================================================================
; pgs_npoints.pro
;
;===========================================================================
function pgs_npoints, pp, visible=visible
 nv_notify, pp, type = 1

 n = n_elements(pp)
 np = 0

 if(NOT keyword__set(visible)) then $
  begin
   for i=0, n-1 do if(ptr_valid(pp[i].points_p)) then $
                                   np = np + n_elements(*pp[i].points_p)/2
  end $
 else $
  for i=0, n-1 do $
   begin
    pgs_visible_points, pp[i], p=p
    if(keyword__set(p)) then np = np + n_elements(p)/2
   end

 return, np
end
;===========================================================================
