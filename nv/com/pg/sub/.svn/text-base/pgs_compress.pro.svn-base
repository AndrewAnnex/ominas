;=============================================================================
; pgs_compress
;
;  Compress many points structs into one by assuming they all have the same
;  number of points.
;
;=============================================================================
function pgs_compress, ps

 nps = n_elements(ps)
 pgs_points, ps[0], p=p, v=v

 np = n_elements(p)/2

 pp = dblarr(2,np,nps)
 vv = dblarr(np,nps,3)


 for i=0, np-1 do $
  begin
   pgs_points, ps[i], p=p, v=v
   pp[*,*,i] = p
   vv[*,i,*] = v
  end

 pp = reform(pp, 2,np*nps, /over)
 vv = reform(vv, np*nps,3, /over)
 
 pps = pgs_clone_ps(ps[0])
 pps = pgs_set_points(pps, p=p, v=v)

 return, pps
end
;=============================================================================
