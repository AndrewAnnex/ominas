									12/05/15
STRCAT Program Reference
========================

 Summary
 -------
  - STRCAT_GSC_INPUT
        Input translator for GSC star catalog.

  - STRCAT_SAO_INPUT
        Input translator for SAO star catalog.

  - STRCAT_TYCHO_INPUT
        Input translator for Tycho-2 star catalog.

  - STRCAT_UCACT_INPUT
        Input translator for ucact-c star catalog compiled by Bill Owen.

  - STR_ABERR_POS
	Corrects star positions for stellar aberration due to the velocity
	of the observer.

	Star catalogues are compiled for a reference frame in which the 
	Sun (or alternately the Solar System Barycenter or SSB) is 
	stationary.  For an observer moving at a large velocity wrt the
	SSB, a correction must be done.  Let v be the observer's velocity.
	If omega is the angle between the observer's velocity vector and 
	the vector pointing towards the star, then v*sin(omega) is the 
	component of the observer's velocity that is tangential to the 
	star's position.  To transform the starlight's velocity vector
	from the SSB-stationary frame into the observer's frame, this
	velocity must be vector-subtracted from the starlight's vector.
	The result is the starlight's path as observed in the observer's
	frame, which is deflected by an angle phi (the angle at the
	bottom of the triangle below).  Since, according to Special
	Relativity, the velocity of light is c = 3e8 m/s in all frames,
	the hypoteneuse of the triangle below (representing the light's
	path in the observer's frame) has a vector magnitude of c.

		     v*sin(omega)

			<-----
			^     ^
			 \    |
	   apparent path  \   | actual path
	   of starlight	   \  | of starlight
		(c)	    \ |
			     \|

	Therefore, we arrive at an expression for the deflection angle:

		sin(phi) = v*sin(omega) / c

  - STR_ABERR_RADEC
	Corrects star positions for stellar aberration due to the velocity
	of the observer.

	Star catalogues are compiled for a reference frame in which the 
	Sun (or alternately the Solar System Barycenter or SSB) is 
	stationary.  For an observer moving at a large velocity wrt the
	SSB, a correction must be done.  Let v be the observer's velocity.
	If omega is the angle between the observer's velocity vector and 
	the vector pointing towards the star, then v*sin(omega) is the 
	component of the observer's velocity that is tangential to the 
	star's position.  To transform the starlight's velocity vector
	from the SSB-stationary frame into the observer's frame, this
	velocity must be vector-subtracted from the starlight's vector.
	The result is the starlight's path as observed in the observer's
	frame, which is deflected by an angle phi (the angle at the
	bottom of the triangle below).  Since, according to Special
	Relativity, the velocity of light is c = 3e8 m/s in all frames,
	the hypoteneuse of the triangle below (representing the light's
	path in the observer's frame) has a vector magnitude of c.

		     v*sin(omega)

			<-----
			^     ^
			 \    |
	   apparent path  \   | actual path
	   of starlight	   \  | of starlight
		(c)	    \ |
			     \|

	Therefore, we arrive at an expression for the deflection angle:

		sin(phi) = v*sin(omega) / c













































STRCAT_GSC_INPUT
----------------


 PURPOSE:
        Input translator for GSC star catalog.


 CATEGORY:
	NV/CONFIG


 CALLING SEQUENCE(only to be called by nv_get_value):
       result = strcat_gsc_input(dd, keyword)


 ARGUMENTS:
  INPUT:
	dd:		Data descriptor.

	keyword:	String giving the name of the translator quantity.

  OUTPUT:
       NONE

 KEYWORDS:
  INPUT:
	key1:		Observer descriptor, must be of subclass CAMERA.


  OUTPUT:
	status:		Zero if valid data is returned.

	n_obj:		Number of objects returned.

	dim:		Dimensions of return objects.


  TRANSLATOR KEYWORDS:
 	jtime:		Years since 1950 (the epoch of catalog) for precession
			and proper motion correction.  If not given, it is taken
			from the object descriptor bod_time, which is assumed to
			be seconds past 1950 unless keyword /j2000 is set.

	j2000:		If set, coordinates are output wrt j2000.

	b1950:		If set, coordinates are output wrt b1950.

	path_gsc:	The directory of the star catalog.   If not given, the
			routine uses the environment variable 'NV_GSC_DATA'.  
			The catalog data is grouped into approx 10,000 separate
			regions in numbered files in 24 separate subdirectories.
			Each star has a data record of 16 bytes.
			GSC_ID, CLASS, RA_DEG (degrees), DEC_DEG (degrees), and
			MAG (Visual Magnitude). The real values (RA_DEG, DEC_DEG
			and MAG) are in XDR, the GSC_ID and CLASS are 
			network-order short integers.

	faint:		Stars with magnitudes fainter than this will not be
			returned.

	bright:		Stars with magnitudes brighter than this will not be
			returned.


  ENVIRONMENT VARIABLES:
	NV_GSC_DATA:	Directory containing the GSC catalog data unless
			overridden using the path_gsc translator keyword.


 RETURN:
       Star descriptor containing all the stars found.  The Sp part of
       the star descriptor does not contain the Spectral type since this
       is not available.  Instead it contains the GSC class of the object:
       0 - star
       1 - galaxy
       2 - blend or member of incorrectly resolved blend.
       3 - non-star
       5 - potential artifact

         (Note that code 1 is used only for a few  hand-entered errata;
         galaxies successfully processed by the software have a classi-
         fication of 3 [non-stellar].  Also code 4 is never used.)  


 RESTRICTIONS:
       Since the distance to stars are not given in the GSC catalog, the
       position vector magnitude is set as 10 parsec and the luminosity
       is calculated from the visual magnitude and the 10 parsec distance.

	This translator does not correct for proper motion.


 PROCEDURE:
       Stars are found in a square area in RA and DEC around a given
       or calculated center.  The star descriptor is filled with stars
       that fit in this area.  If B1950 is selected, input ods orient 
	matrix is assumed to be B1950 also, if not, input is assumed to be
	J2000, like the catalog.  


 MODIFICATION HISTORY:
       Written by:     Vance Haemmerle, 3/2000 (pg_get_stars_gsc.pro)
       Modified:       Spitale 9/2001 - changed to strcat_gsc_input.pro




























STRCAT_SAO_INPUT
----------------


 PURPOSE:
        Input translator for SAO star catalog.


 CATEGORY:
       NV/CONFIG


 CALLING SEQUENCE(only to be called by nv_get_value):
       result = strcat_sao_input(dd, keyword)


 ARGUMENTS:
  INPUT:
	dd:		Data descriptor.

	keyword:	String giving the name of the translator quantity.

  OUTPUT:
       NONE

 KEYWORDS:
  INPUT:
	key1:		Observer descriptor, must be of subclass CAMERA.

  OUTPUT:
	status:		Zero if valid data is returned.

	n_obj:		Number of objects returned.

	dim:		Dimensions of return objects.


  TRANSLATOR KEYWORDS:
 	jtime:		Years since 1950 (the epoch of catalog) for precession
			and proper motion correction.  If not given, it is taken
			from the object descriptor bod_time, which is assumed to
			be seconds past 1950 unless keyword /j2000 is set.

	j2000:		If set, coordinates are output wrt j2000.

	b1950:		If set, coordinates are output wrt b1950.

	path_sao:	The directory of the star catalog, sao_idl.str.   
			In the file, the data is grouped into 18 segments of 
			10 degrees each.  Each star has a data record of 36
			bytes.  RA (radians), RAMu (pm in sec time/year)
			DEC (radians), DECMu (pm in sec arc/year)
			Visual Magnitude,  13-byte Name and 3-byte Spectral type
			The first 4 records of the output catalog are 18 sets
			of pointers to the records for the start and end of
			each segment.
			The real values (RA, RAMu, DEC, DECMu and Mag) are in
			XDR.  The pointer integers are in network byte order.

	faint:		Stars with magnitudes fainter than this will not be
			returned.

	bright:		Stars with magnitudes brighter than this will not be
			returned.


  ENVIRONMENT VARIABLES:
	NV_SAO_DATA:	Directory containing the SAO catalog data unless
			overridden using the path_sao translator keyword.


 RETURN:
       Star descriptor containing all the stars found.

 RESTRICTIONS:
       Since the distance to stars are not given in the SAO catalog, the
       position vector magnitude is set as 10 parsec and the luminosity
       is calculated from the visual magnitude and the 10 parsec distance.


 PROCEDURE:
       Stars are found in a square area in RA and DEC around a given
       or calculated center.  The star descriptor is filled with stars
       that fit in this area.  If J2000 is selected, input RA, DEC and/or
	ods orient matrix is assumed to be J2000 also, if not, input is
	assumed to be B1950, like the catalog. 


 MODIFICATION HISTORY:
       Written by:     Vance Haemmerle, 5/1998
	Modified:       1/1999
       Modified:       Tiscareno, 7/2000 (stellar aberration added)
       Modified:       Haemmerle, 12/2000
       Modified:       Spitale 9/2001 - changed to strcat_sao_input.pro






































STRCAT_TYCHO_INPUT
------------------


 PURPOSE:
        Input translator for Tycho-2 star catalog.


 CATEGORY:
       NV/PG


 CALLING SEQUENCE(only to be called by nv_get_value):
       result = strcat_tycho_input(dd, keyword)


 ARGUMENTS:
  INPUT:
	dd:		Data descriptor.

	keyword:	String giving the name of the translator quantity.

  OUTPUT:
       NONE

 KEYWORDS:
  INPUT:
	key1:		Observer descriptor, must be of subclass CAMERA.

  OUTPUT:
	status:		Zero if valid data is returned.

	n_obj:		Number of objects returned.

	dim:		Dimensions of return objects.


  TRANSLATOR KEYWORDS:
 	jtime:		Years since 1950 (the epoch of catalog) for precession
			and proper motion correction.  If not given, it is taken
			from the object descriptor bod_time, which is assumed to
			be seconds past 1950 unless keyword /j2000 is set.

	j2000:		If set, coordinates are output wrt j2000.

	b1950:		If set, coordinates are output wrt b1950.

	path_tycho:	The directory of the star catalog.   If not given, the
 			routine uses the environment variable 'NV_TYCHO_DATA'.  
			The catalog data is grouped into approx 10,000 separate
			regions in numbered files in 24 separate subdirectories.
			Each star has a data record of 16 bytes.
			Two identifying numbers: TYCHO_ID_1 and TYCHO_ID_2, 
			RA_DEG and DEC_DEG (degrees), RApm and DECpm 
			(milliarcseconds/year), and MAG (Visual Magnitude). 
			The real values (RA_DEG, DEC_DEG, RApm, DECpm, and MAG) 
			are in XDR, the GSC_ID and CLASS are network-order 
			short integers.

	faint:		Stars with magnitudes fainter than this will not be
			returned.

	bright:		Stars with magnitudes brighter than this will not be
			returned.


  ENVIRONMENT VARIABLES:
	NV_TYCHO_DATA:	Directory containing the TYCHO catalog data unless
			overridden using the path_tycho translator keyword.


 RETURN:
       Star descriptor containing all the stars found.  The Sp part of
       the star descriptor contains neither the Spectral type nor the 
       GSC class. 

 RESTRICTIONS:
       Since the distance to stars are not given in the GSC catalog, the
       position vector magnitude is set as 10 parsec and the luminosity
       is calculated from the visual magnitude and the 10 parsec distance.


 PROCEDURE:
       Stars are found in a square area in RA and DEC around a given
       or calculated center.  The star descriptor is filled with stars
       that fit in this area.  If B1950 is selected, input RA, DEC and/or
	ods orient matrix is assumed to be B1950 also, if not, input is
	assumed to be J2000, like the catalog.  


 MODIFICATION HISTORY:
       Written by:     Vance Haemmerle, 3/2000 (pg_get_stars_gsc.pro)
       Modified:       Tiscareno, 8/2000
	Modified:	Haemmerle, 12/2000
       Modified:       Spitale 9/2001 - changed to strcat_tycho_input.pro





































STRCAT_UCACT_INPUT
------------------


 PURPOSE:
        Input translator for ucact-c star catalog compiled by Bill Owen.


 CATEGORY:
	NV/CONFIG


 CALLING SEQUENCE:
       result = strcat_ucact_input(dd, keyword)


 ARGUMENTS:
  INPUT:
	dd:		Data descriptor.

	keyword:	String giving the name of the translator quantity.

  OUTPUT:
       NONE

 KEYWORDS:
  INPUT:
	key1:		Observer descriptor, must be of subclass CAMERA.


  OUTPUT:
	status:		Zero if valid data is returned.

	n_obj:		Number of objects returned.

	dim:		Dimensions of return objects.


  TRANSLATOR KEYWORDS:
 	jtime:		Years since 1950 (the epoch of catalog) for precession
			and proper motion correction.  If not given, it is taken
			from the object descriptor bod_time, which is assumed to
			be seconds past 1950 unless keyword /j2000 is set.

	j2000:		If set, coordinates are output wrt j2000.

	b1950:		If set, coordinates are output wrt b1950.

	path_ucact:	The directory of the star catalog.   If not given, the
			routine uses the environment variable 'NV_UCACT_DATA'.  
			The catalog data is grouped into approx 10,000 separate
			regions in numbered files in 24 separate subdirectories.
			Each star has a data record of 16 bytes.
			UCACT_ID, CLASS, RA_DEG (degrees), DEC_DEG (degrees), and
			MAG (Visual Magnitude). The real values (RA_DEG, DEC_DEG
			and MAG) are in XDR, the UCACT_ID and CLASS are 
			network-order short integers.

	faint:		Stars with magnitudes fainter than this will not be
			returned.

	bright:		Stars with magnitudes brighter than this will not be
			returned.


  ENVIRONMENT VARIABLES:
	NV_UCACT_DATA:	Directory containing the UCACT catalog data unless
			overridden using the path_ucact translator keyword.


 RETURN:
       Star descriptor containing all the stars found.  The Sp part of
       the star descriptor does not contain the Spectral type since this
       is not available.  Instead it contains the UCACT class of the object:
       0 - star
       1 - galaxy
       2 - blend or member of incorrectly resolved blend.
       3 - non-star
       5 - potential artifact

         (Note that code 1 is used only for a few  hand-entered errata;
         galaxies successfully processed by the software have a classi-
         fication of 3 [non-stellar].  Also code 4 is never used.)  


 RESTRICTIONS:
       Since the distance to stars are not given in the UCACT catalog, the
       position vector magnitude is set as 10 parsec and the luminosity
       is calculated from the visual magnitude and the 10 parsec distance.


 PROCEDURE:
       Stars are found in a square area in RA and DEC around a given
       or calculated center.  The star descriptor is filled with stars
       that fit in this area.  If B1950 is selected, input ods orient 
	matrix is assumed to be B1950 also, if not, input is assumed to be
	J2000, like the catalog.  


 MODIFICATION HISTORY:
       Written by:	   	  Spitale; 3/2004































STR_ABERR_POS
-------------


 PURPOSE:
	Corrects star positions for stellar aberration due to the velocity
	of the observer.

	Star catalogues are compiled for a reference frame in which the 
	Sun (or alternately the Solar System Barycenter or SSB) is 
	stationary.  For an observer moving at a large velocity wrt the
	SSB, a correction must be done.  Let v be the observer's velocity.
	If omega is the angle between the observer's velocity vector and 
	the vector pointing towards the star, then v*sin(omega) is the 
	component of the observer's velocity that is tangential to the 
	star's position.  To transform the starlight's velocity vector
	from the SSB-stationary frame into the observer's frame, this
	velocity must be vector-subtracted from the starlight's vector.
	The result is the starlight's path as observed in the observer's
	frame, which is deflected by an angle phi (the angle at the
	bottom of the triangle below).  Since, according to Special
	Relativity, the velocity of light is c = 3e8 m/s in all frames,
	the hypoteneuse of the triangle below (representing the light's
	path in the observer's frame) has a vector magnitude of c.

		     v*sin(omega)

			<-----
			^     ^
			 \    |
	   apparent path  \   | actual path
	   of starlight	   \  | of starlight
		(c)	    \ |
			     \|

	Therefore, we arrive at an expression for the deflection angle:

		sin(phi) = v*sin(omega) / c


 CATEGORY:
       LIB/STR


 CALLING SEQUENCE:
       str_aberr_pos, pos, vel, posout


 ARGUMENTS:
  INPUT:
            pos:    Array of column vectors (1,3,n) from observer to objects 

            vel:    Velocity of the observer, in meters/second wrt Solar System
	             Barycenter, or Sun, which is close enough

  OUTPUT:
         posout:    Apparent position of objects from observer corrected for
                    stellar aberration


 KEYWORDS:
  INPUT:
       NONE

  OUTPUT:
       NONE


 RESTRICTIONS:
	Input vel must be a 1x3 vector in inertial Cartesian coordinates,
       in units of meters/second.

 STATUS:
       Completed.  Checked vs SPICE routine STELAB


 MODIFICATION HISTORY:
       Written by:     Tiscareno, 7/00
      Modified by:     Haemmerle, 12/00





















































STR_ABERR_RADEC
---------------


 PURPOSE:
	Corrects star positions for stellar aberration due to the velocity
	of the observer.

	Star catalogues are compiled for a reference frame in which the 
	Sun (or alternately the Solar System Barycenter or SSB) is 
	stationary.  For an observer moving at a large velocity wrt the
	SSB, a correction must be done.  Let v be the observer's velocity.
	If omega is the angle between the observer's velocity vector and 
	the vector pointing towards the star, then v*sin(omega) is the 
	component of the observer's velocity that is tangential to the 
	star's position.  To transform the starlight's velocity vector
	from the SSB-stationary frame into the observer's frame, this
	velocity must be vector-subtracted from the starlight's vector.
	The result is the starlight's path as observed in the observer's
	frame, which is deflected by an angle phi (the angle at the
	bottom of the triangle below).  Since, according to Special
	Relativity, the velocity of light is c = 3e8 m/s in all frames,
	the hypoteneuse of the triangle below (representing the light's
	path in the observer's frame) has a vector magnitude of c.

		     v*sin(omega)

			<-----
			^     ^
			 \    |
	   apparent path  \   | actual path
	   of starlight	   \  | of starlight
		(c)	    \ |
			     \|

	Therefore, we arrive at an expression for the deflection angle:

		sin(phi) = v*sin(omega) / c


 CATEGORY:
       LIB/STR


 CALLING SEQUENCE:
       str_aberr_radec, ra, dec, vel, abr_ra, abr_dec


 ARGUMENTS:
  INPUT:
             ra:    Array of Right Ascension (radians)

            dec:    Array of Declination (radians)

            vel:    Velocity of the observer, in meters/second wrt Solar System
	             Barycenter, or Sun, which is close enough

  OUTPUT:
         abr_ra:    Array of aberration corrected Right Ascension (radians)

        abr_dec:    Array of aberration corrected Declination (radians)


 KEYWORDS:
  INPUT:
       NONE

  OUTPUT:
       NONE


 RESTRICTIONS:
	Input vel must be a 1x3 vector in inertial Cartesian coordinates,
       in units of meters/second.

 STATUS:
       Completed.  Checked vs SPICE routine STELAB


 MODIFICATION HISTORY:
       Written by:     Tiscareno, 7/00
      Modified by:     Haemmerle, 12/00


















































