;=============================================================================;
; station_read
;
;=============================================================================;
function station_read, filename, names=names, default=default, silent=silent


 ;----------------------------
 ; read file
 ;----------------------------
 if(NOT keyword_set(silent)) then print, 'Reading station catalog ' + filename + '...'
 cat = read_txt_table(filename)

 ;----------------------------
 ; read columns
 ;----------------------------
 dim = size(cat, /dim)
 kk=0
 if(dim[1] EQ 4) then $
  begin
   names = cat[*,kk]					 & kk=kk+1
   lat = double(cat[*,kk]) 				 & kk=kk+1
   lon = double(cat[*,kk]) 				 & kk=kk+1
   alt = double(cat[*,kk]) 				 & kk=kk+1
  end $
 else $
  begin 
   names = cat[*,kk]					 & kk=kk+1
   latdeg = double(cat[*,kk]) 				 & kk=kk+1
   latmin = double(cat[*,kk]) 				 & kk=kk+1
   latsec = double(cat[*,kk]) 				 & kk=kk+1
   londeg = double(cat[*,kk]) 				 & kk=kk+1
   lonmin = double(cat[*,kk]) 				 & kk=kk+1
   lonsec = double(cat[*,kk]) 				 & kk=kk+1
   alt = double(cat[*,kk]) 				 & kk=kk+1

   lat = latdeg + latmin/60d + latsec/3600d
   lon = londeg + lonmin/60d + lonsec/3600d
  end

 ;- - - - - - - - - - - - - - - - - - - - -
 ; set up data structure
 ;- - - - - - - - - - - - - - - - - - - - -
 n = n_elements(names)

 dat = replicate({station_record}, n)

 dat.name = names
 dat.lat = lat * !dpi/180d
 dat.lon = lon * !dpi/180d
 dat.alt = alt


 return, dat
end
;=============================================================================;


